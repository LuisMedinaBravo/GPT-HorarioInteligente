<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">

  <title>Campus Planner</title>

  <!-- Required meta tags -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Datatables -->
  <link rel="stylesheet" href="https://cdn.datatables.net/v/bs4-4.1.1/dt-1.10.18/datatables.min.css">

  <!-- Buttons -->
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.2/css/buttons.dataTables.min.css">

  <!-- General Style -->
  <link href="style.css" rel="stylesheet">

  <!-- Acordeon -->
  <link rel="stylesheet" type="text/css" href="css/acordeon.css" />

  <!--Fonts-->
  <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,200,100,500,600,700,800,900' rel='stylesheet'
      type='text/css'>
  <link href="css/fonts/font-awesome.css" rel="stylesheet">


  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <!-- Bootstrap JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/js/bootstrap.min.js"></script>

  <!-- Datatables -->
  <script src="https://cdn.datatables.net/v/bs4-4.1.1/dt-1.10.18/datatables.min.js"></script>
  <!-- Buttons -->
  <script src="https://cdn.datatables.net/buttons/1.6.2/js/dataTables.buttons.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.html5.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.flash.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.print.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
  <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.53/build/pdfmake.min.js"></script>
  <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.53/build/vfs_fonts.js"></script>

  <!-- redes sociales-->
  <script src="js/redes_sociales.js"></script>
  <!-- SweetAlert 2 -->
  <link rel="stylesheet" type="text/css" href="css/sweetalert2.css" />

 <!-- Vendor Styles -->
 <link rel="stylesheet" type="text/css" href="vendor/push-menu/css/jasny-bootstrap.min.css" />
 <link rel="stylesheet" type="text/css" href="vendor/push-menu/css/push-menu.css" />

    <style>
        #mydatatable tfoot input {
            width: 100% !important;
        }

        #mydatatable tfoot {
            display: table-header-group !important;
        }
        
        .dt-buttons {
            margin-bottom: 10px;
        }
        
        .dataTables_filter label {
            display: flex;
            align-items: center;
        }
        
        .dataTables_filter input[type="search"] {
            margin-left: 5px;
        }
        .smooth {
          cursor: pointer;
        }
    </style>
</head>

<body class="container-fluid p-5">

  <br><br><br>
  <!-- navbar -->
  <nav id="infinityNav" class="navmenu menu-side navmenu-default navmenu-fixed-left offcanvas" role="navigation">
    <ul class="list-unstyled push-menu-items pm-title text-center">

        

        <li class="push-menu-title">
            <span style="color: aqua; ">Campus Planner</span>
            <div id="saludo_usuario" style="color: white; 
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; 
            font-size: 18px;
            border: 10px;"></div>
        </li>
    </ul>
    <div id="push-menu-nav">
        <ul class="list-unstyled push-menu-items text-center">

            <!--                 <li id="descargarHorario" class="push-menu-item">
                <a class="smooth">Descargar Horario</a>
            </li> -->
            <!-- </li> -->
           
            <div id="inicio">
                <li class="push-menu-item">
                    <a class="smooth">Inicio</a>
                </li>
            </div>

            
            <div class="accordion">
                <li class="push-menu-item">
                    <a class="smooth">Buscador de salas</a>
                </li>
            </div>

            <li class="push-menu-item panel" style="margin: 10px; background-color: #45525E">
                <input style="width: 70%;" id="input_buscar_sala" type="text" placeholder="Ingresar sala">
                <button style="border-radius: 4px;  background-color: rgb(73, 188, 150); /* Green */
                    border: none;
                    color: white;
                    padding: 8px;
                    text-align: center;
                    text-decoration: none;
                    display: inline-block;
                    cursor: pointer;
                   " id="boton_buscar" type="button">Buscar</button>
            </li>


            <li class="push-menu-item">
                <a class="smooth" id="inicio" href="importarExcel.html">Importar excel</a>
            </li>

            <!-- <li class="push-menu-item">
                <a class="smooth" id="inicio" href="borrarExcel.html">Borrar todo</a>
            </li> -->

            <li class="push-menu-item">
                <a class="smooth" id="contacto">Contacto</a>
                <a style="display: none;" id="contacto-label" class="contacto-label">Camino Los Niches Km. 1, Curicó, Chile <br> +56 75
                    2201 700</a>
            </li>
            <li id="CerrarSesion" class="push-menu-item" onclick="CerrarSesion()">
                <a class="smooth">Cerrar Sesión</a>
            </li>


        </ul>
    </div>
    <ul class="list-unstyled push-menu-items push-menu-social text-center" ">
        <li class=" push-menu-social-item">
        <a href="#" class="cbutton cbutton--effect-ivana">
            <i class="cbutton__icon fa fa-instagram" onclick="Instagram()" style="color: aqua;"></i>
        </a>
        </li>
        <li class="push-menu-social-item">
            <a href="#" class="cbutton cbutton--effect-ivana">
                <i class="cbutton__icon fa fa-facebook" onclick="Facebook()" style="color: aqua;"></i>
            </a>
        </li>

        <li class="push-menu-social-item">
            <a href="#" class="cbutton cbutton--effect-ivana">
                <i class="cbutton__icon fa fa-twitter" onclick="Twitter()" style="color: aqua;"></i>
            </a>
        </li>
    </ul>
    <div class="menu-store-btn-container">

    </div>

</nav>
<!-- boton navbar -->
<div id="menu" class="push-menu-container">
    <div class="navbar navbar-default navbar-fixed-top push-wrapper">
        <div class="push-menu-button" data-toggle="offcanvas" data-target="#infinityNav" data-canvas="body">
            <button type="button" class="navbar-toggle">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <span class="menu-text" style="color: black;">Menu</span>
        </div>
    </div>

</div>


<button id="bloques" type="button" style="margin-left: 85%;">Bloques</button>

    <div class="table-responsive" id="mydatatable-container">
        <table class="records_list table table-striped table-bordered table-hover" id="mydatatable">
            <thead>
                <tr>
                    <th>Asignatura</th>
                    <th>Sección</th>
                    <th>Carrera</th>
                    <th>Día</th>
                    <th>Edificio</th>
                    <th>Hora de inicio</th>
                    <th>Hora de fin</th>
                    <th>Profesor</th>
                    <th>Sala</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th>Filter..</th>
                    <th>Filter..</th>
                    <th>Filter..</th>
                    <th>Filter..</th>
                    <th>Filter..</th>
                    <th>Filter..</th>
                    <th>Filter..</th>
                    <th>Filter..</th>
                    <th>Filter..</th>
                    <th>Filter..</th>
                </tr>
            </tfoot>
            <tbody></tbody>
        </table>
        <!-- Modal de edición -->
        <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true" data-backdrop="static">
          <div class="modal-dialog" role="document">
              <div class="modal-content">
                  <div class="modal-header">
                      <h5 class="modal-title" id="editModalLabel">Editar Registro</h5>
                      <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                          <span aria-hidden="false">&times;</span>
                      </button> -->
                  </div>
                  <div class="modal-body">
                      <form id="editForm">
                        <div class="form-group">
                            <label for="asignatura">Asignatura:</label>
                            <input type="text" class="form-control" id="asignatura" name="asignatura">
                        </div>
                        <!-- <div class="form-group">
                            <label for="seccion">Sección:</label>
                            <input type="text" class="form-control" id="seccion" name="seccion">
                        </div> -->
                        <div class="form-group">
                          <label for="seccion">Sección:</label>
                          <select class="form-control" id="seccion" name="seccion">
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                            <option value="I">I</option>
                          </select>
                        </div>
                        <!-- <div class="form-group">
                          <label for="carrera">Carrera:</label>
                          <input type="text" class="form-control" id="carrera" name="carrera">
                        </div> -->
                        <div class="form-group">
                          <label for="carrera">Carrera:</label>
                          <select class="form-control" id="carrera" name="carrera">
                            <option value="INGENIERÍA CIVIL INDUSTRIAL">INGENIERÍA CIVIL INDUSTRIAL</option>
                            <option value="INGENIERÍA CIVIL EN COMPUTACION">INGENIERÍA CIVIL EN COMPUTACION</option>
                            <option value="INGENIERÍA CIVIL EN OBRAS">INGENIERÍA CIVIL EN OBRAS</option>
                            <option value="INGENIERÍA CIVIL MECATRÓNICA">INGENIERÍA CIVIL MECATRÓNICA</option>
                            <option value="INGENIERÍA CIVIL MECÁNICA">INGENIERÍA CIVIL MECÁNICA</option>
                            <option value="INGENIERÍA CIVIL DE MINAS">INGENIERÍA CIVIL DE MINAS</option>
                            <option value="INGENIERÍA CIVIL ELÉCTRICA">INGENIERÍA CIVIL ELÉCTRICA</option>
                          </select>
                        </div>
                        <!-- <div class="form-group">
                          <label for="dia">Día:</label>
                          <input type="text" class="form-control" id="dia" name="dia">
                        </div> -->
                        <div class="form-group">
                          <label for="dia">Día:</label>
                          <select class="form-control" id="dia" name="dia">
                            <option value="Lunes">Lunes</option>
                            <option value="Martes">Martes</option>
                            <option value="Miércoles">Miércoles</option>
                            <option value="Jueves">Jueves</option>
                            <option value="Viernes">Viernes</option>
                            <option value="Sábado">Sábado</option>
                            <option value="Domingo">Domingo</option>
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="edificio">Edificio:</label>
                          <input type="text" class="form-control" id="edificio" name="edificio">
                        </div>
                        <div class="form-group">
                          <label for="hora_inicio">Hora de Inicio:</label>
                          <input type="time" class="form-control" id="hora_inicio" name="hora_inicio" pattern="([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]" step="1">
                        </div>
                        <div class="form-group">
                          <label for="hora_fin">Hora de Fin:</label>
                          <input type="time" class="form-control" id="hora_fin" name="hora_fin" pattern="([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]" step="1">
                        </div>
                        <div class="form-group">
                          <label for="hora_fin">Profesor:</label>
                          <input type="text" class="form-control" id="profesor" name="profesor">
                        </div>
                        <div class="form-group">
                          <label for="hora_fin">Sala:</label>
                          <input type="text" class="form-control" id="sala" name="sala">
                        </div>
                        <!-- Campos del formulario de edición aquí -->
                      </form>
                      
                  </div>
                  <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" id="closeBtn">Cerrar</button>
                      <button type="button" class="btn btn-primary" id="saveChangesBtn">Guardar cambios</button>
                  </div>
              </div>
          </div>
        </div>

    </div>

    <br><br><br><br><br>

    <!-- Footer start -->
    <footer id="footer" style="background-color: #333333;">
        <div class="container" style="background-color: #333333;">
          <!-- footer Content Inner -->
    
          <div class="row margin-sm">
    
            <div class="col-lg-12 text-center" style="background-color: #333333; color: white;">
              <span>SÍGUENOS</span>
              <ul class="list-unstyled footer-items footer-social no-margin">
                <li class="footer-social-item">
                  <a href="#" class="cbutton cbutton--effect-ivana">
                    <i class="cbutton__icon fa fa-instagram" onclick="Instagram()"></i>
                  </a>
                </li>
                <li class="footer-social-item">
                  <a href="#" class="cbutton cbutton--effect-ivana">
                    <i class="cbutton__icon fa fa-facebook" onclick="Facebook()"></i>
                  </a>
                </li>
                <li class="footer-social-item">
                  <a href="#" class="cbutton cbutton--effect-ivana">
                    <i class="cbutton__icon fa fa-twitter" onclick="Twitter()"></i>
                  </a>
                </li>
                <li class="footer-social-item">
                  <a href="#" class="cbutton cbutton--effect-ivana">
                    <i class="cbutton__icon fa fa-youtube-play" onclick="Youtube()"></i>
                  </a>
                </li>
              </ul>
              <span>Gestión de Proyectos Tecnológicos | Derechos de autor © 2023</span>
            </div>
          </div>
          <!-- /footer Content Inner -->
        </div>
      </footer>
    <div id="error404" style="display: none;">

            <img src="img/gifs/404.gif">
        
    </div>
	<!-- Footer end -->






    <!-- Vendor Scripts -->
    <script src="vendor/push-menu/js/jasny-bootstrap.min.js"></script>


    <!-- Sweetalert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/js/bootstrap.min.js"></script>

    <!-- Datatables -->
    <script src="https://cdn.datatables.net/v/bs4-4.1.1/dt-1.10.18/datatables.min.js"></script>

    <!-- Buttons -->
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.flash.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.print.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.53/build/pdfmake.min.js"></script>
    <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.53/build/vfs_fonts.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js"></script>

    <script type="text/javascript">
        // Configurar la información de tu proyecto de Firebase
        var firebaseConfig = {
          apiKey: "AIzaSyCKdwinLMIaVlJ6mkJuTo6aL4wy8J4tDEQ",
          authDomain: "gpt-horariointeligente.firebaseapp.com",
          projectId: "gpt-horariointeligente",
          storageBucket: "gpt-horariointeligente.appspot.com",
          messagingSenderId: "87795108895",
          appId: "1:87795108895:web:294c2c36d200e36c15d92a"
        };
        
        // Inicializar la app de Firebase
        firebase.initializeApp(firebaseConfig);
        
        // Inicializar Firestore
        var db = firebase.firestore();
        
        $(document).ready(function () {
            $('#mydatatable tfoot th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" placeholder="Filtrar.." />');
            });

            var table = $('#mydatatable').DataTable({
                searching: true,
                "dom": 'B<"float-left"i><"float-right"t<"float-left"l><"float-right"p><"clearfix">',
                "responsive": false,
                "language": {
                    "url": "https://cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"
                },
                "order": [
                    [0, "desc"]
                ],
                "initComplete": function () {
                    this.api().columns().every(function () {
                        var that = this;

                        $('input', this.footer()).on('keyup change', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });
                },
                "buttons": [
                    {
                        extend: 'csv',
                        className: 'btn btn-primary',
                        text: '<i class="fas fa-file-csv"></i> Exportar a CSV',
                    },
                    {
                        extend: 'excel',
                        className: 'btn btn-primary',
                        text: '<i class="fas fa-file-excel"></i> Exportar a Excel',
                    },
                    {
                        extend: 'pdf',
                        className: 'btn btn-primary',
                        text: '<i class="fas fa-file-pdf"></i> Exportar a PDF',
                    },
                    {
                        extend: 'print',
                        className: 'btn btn-primary',
                        text: '<i class="fas fa-print"></i> Imprimir',
                    }
                ]
            });
            
            // Obtener el parámetro de sala de la URL
            var urlParams = new URLSearchParams(window.location.search);
            var sala = urlParams.get('sala');
            
            // Mapear los números de día a los nombres correspondientes
            var dias = {
              1: 'Lunes',
              2: 'Martes',
              3: 'Miércoles',
              4: 'Jueves',
              5: 'Viernes',
              6: 'Sábado',
              7: 'Domingo'
            };

            // Mapear los números de sección a letras correspondientes
            var secciones = {
              1: 'A',
              2: 'B',
              3: 'C',
              4: 'D',
              5: 'E',
              6: 'F',
              7: 'G',
              8: 'H',
              9: 'I'
            };
            
            // Obtener los datos filtrados por sala desde Firestore y llenar la tabla
            db.collection("horario").where("sala", "==", sala).get().then(function (querySnapshot) {
                querySnapshot.forEach(function (doc) {
                    var data = doc.data();
                    var row = [
                      data.asignatura,
                      secciones[data.seccion],
                      data.carrera,
                      dias[data.dia], // Obtener el nombre del día correspondiente
                      data.edificio,
                      data.hora_inicio,
                      data.hora_fin,
                      data.profesor,
                      data.sala,
                      '<button class="btn btn-primary btn-edit" data-toggle="modal" data-target="#editModal" data-id="' + doc.id + '"><i class="fas fa-pencil-alt"></i> Editar</button>',
                    ];
                    table.row.add(row);
                });
                table.draw();
            });
        });



        let inicioHome = document.getElementById("inicio");
        inicioHome.addEventListener("click", inicio);

        function inicio(){
            window.location.href = 'vistaSalas_administrador.html?&sala=SALA%2011';
        }

        let botonAdm = document.getElementById("closeBtn");
        botonAdm.addEventListener("click", cerrarModal);

        function cerrarModal(){
            var modal = document.querySelector('#editModal');
            modal.parentNode.removeChild(modal);
            location.reload();
        }

        
        $(document).on('click', '.btn-edit', function () {
          var row = $(this).closest('tr');
          var docId = $(this).data('id');
          $('#editModal').data('edit-id', docId); // Almacena el ID en una variable de datos del modal
          console.log(docId);

          var asignatura = row.find('td:eq(0)').text();
          var seccion = row.find('td:eq(1)').text();
          var carrera = row.find('td:eq(2)').text();
          var dia = row.find('td:eq(3)').text();
          var edificio = row.find('td:eq(4)').text();
          var horaInicio = row.find('td:eq(5)').text();
          var horaFin = row.find('td:eq(6)').text();
          var profesor = row.find('td:eq(7)').text();
          var sala = row.find('td:eq(8)').text();

          // Carga los valores en los campos del formulario de edición
          $('#asignatura').val(asignatura);
          $('#seccion').val(seccion);
          $('#carrera').val(carrera);
          $('#dia').val(dia);
          $('#edificio').val(edificio);
          $('#hora_inicio').val(horaInicio);
          $('#hora_fin').val(horaFin);
          $('#profesor').val(profesor);
          $('#sala').val(sala);

          // Actualiza el botón "Guardar cambios" para que sepa qué fila se está editando
          $('#saveChangesBtn').data('row', row);
        });

        $(document).on('click', '#saveChangesBtn', function () {
            var row = $(this).data('row');
            var asignatura = $('#asignatura').val();
            var seccion = $('#seccion').val();
            var carrera = $('#carrera').val();
            var dia = $('#dia').val();
            var edificio = $('#edificio').val();
            var horaInicio = $('#hora_inicio').val();
            var horaFin = $('#hora_fin').val();
            var profesor = $('#profesor').val();
            var sala = $('#sala').val();

            // Verifica si algún campo está vacío
            if (!asignatura || !seccion || !carrera || !dia || !edificio || !horaInicio || !horaFin || !profesor || !sala) {
                console.error("Todos los campos deben ser completados");
                Swal.fire({
                  icon: 'error',
                  title: '¡Error!',
                  text: 'Todos los campos deben ser completados.'
                });
                return;
            }

            // Actualiza los valores en la fila de la tabla
            row.find('td:eq(0)').text(asignatura);
            row.find('td:eq(1)').text(seccion);
            row.find('td:eq(2)').text(carrera);
            row.find('td:eq(3)').text(dia);
            row.find('td:eq(4)').text(edificio);
            row.find('td:eq(5)').text(horaInicio);
            row.find('td:eq(6)').text(horaFin);
            row.find('td:eq(7)').text(profesor);
            row.find('td:eq(8)').text(sala);

            // Obtiene el identificador único del documento
            var docId = $('#editModal').data('edit-id'); // Obtiene el ID almacenado en la variable de datos del modal
            console.log(docId);

            // Objeto para mapear los nombres de los días a los números
            var diasNumeros = {
              lunes: 1,
              martes: 2,
              miércoles: 3,
              jueves: 4,
              viernes: 5,
              sábado: 6,
              domingo: 7
            };

            // Objeto para mapear los nombres de las secciones a números
            var seccionesNumeros = {
              A: 1,
              B: 2,
              C: 3,
              D: 4,
              E: 5,
              F: 6,
              G: 7,
              H: 8,
              I: 9
            };

            // Obtén el número correspondiente al nombre del día
            var diaNumero = diasNumeros[dia.toLowerCase()];

            // Obtén el número correspondiente al nombre del día
            var seccionNumero = seccionesNumeros[seccion.toUpperCase()];

            // Verifica si se encontró un número válido para el día
            if (typeof diaNumero === 'undefined') {
              console.error("Día no válido");
              Swal.fire({
                icon: 'error',
                title: '¡Error!',
                text: 'Día no válido.'
              });
              return;
            }

            // Verifica si se encontró una sección no válida
            if (typeof seccionNumero === 'undefined') {
              console.error("Sección no válida");
              Swal.fire({
                icon: 'error',
                title: '¡Error!',
                text: 'Sección no válida.'
              });
              return;
            }

            // Actualiza los datos en Firestore
            db.collection("horario").doc(docId).update({
              asignatura: asignatura,
              seccion: seccionNumero,
              carrera: carrera,
              dia: diaNumero, // Guarda el número del día en lugar del nombre
              edificio: edificio,
              hora_inicio: horaInicio,
              hora_fin: horaFin,
              profesor: profesor,
              sala: sala
            }).then(function() {
              Swal.fire({
                  icon: 'success',
                  title: '¡Éxito!',
                  text: 'El registro se actualizó correctamente!',
                  allowOutsideClick: false,
                  timer: 2000 // Tiempo en milisegundos (2 segundos)
              }).then(function() {
                  // Cierra el modal después de la notificación
                  $('#editModal').modal('hide');
                  location.reload();
              });
            }).catch(function(error) {
              console.error("Error al actualizar el registro en Firestore: ", error);
              Swal.fire({
                icon: 'error',
                title: '¡Error!',
                text: 'Hubo un error al actualizar el registro!'
              });
              
            });
        });


    </script>

<script>
    var contactoLink = document.querySelector('#contacto');
    var contactoLabel = document.querySelector('#contacto-label');

    contactoLink.addEventListener('click', function () {
    if (contactoLabel.style.display === 'none') {
        contactoLabel.style.display = 'block';
    } else {
        contactoLabel.style.display = 'none';
    }
    });
</script>


<script>
  $("#bloques").click(function() {
            var tabla = $("<table>");
            for (var i = 0; i <= 10; i++) {
            var fila = $("<tr>");
            if (i === 0) {
                fila.append($("<td>").text("Bloques"));
                fila.append($("<td>").text("Hora inicio - fin"));
            } else {
                fila.append($("<td>").text("Bloque " + i+"    "));
                
                if(i==1){
                fila.append($("<td>").text("08:30 - 09:30"));
                }
                if(i==2){
                    fila.append($("<td>").text("09:40 - 10:40"));
                }
                if(i==3){
                    fila.append($("<td>").text("10:50 - 11:50"));
                }
                if(i==4){
                    fila.append($("<td>").text("12:00 - 13:00"));
                }
                if(i==5){
                    fila.append($("<td>").text("13:10 - 14:10"));
                }
                if(i==6){
                    fila.append($("<td>").text("14:20 - 15:20"));
                }
                if(i==7){
                    fila.append($("<td>").text("15:30 - 16:30"));
                }
                if(i==8){
                    fila.append($("<td>").text("16:40 - 17:40"));
                }
                if(i==9){
                    fila.append($("<td>").text("17:50 - 18:50"));
                }
                if(i==10){
                    fila.append($("<td>").text("19:00 - 20:00"));
                }
            }
            tabla.append(fila);
        }
        tabla.css({"margin": "auto", "display": "inline-block"});
        Swal.fire({
            title: "Tabla de bloques",
            html: tabla.prop("outerHTML"),
            icon: "info"
        });
    });
</script>

<script>

var acc = document.getElementsByClassName("accordion");
  var i;


  for (i = 0; i < acc.length; i++) {
      acc[i].addEventListener("click", function () {
          /* Toggle between adding and removing the "active" class,
          to highlight the button that controls the panel */
          this.classList.toggle("active");

          /* Toggle between hiding and showing the active panel */
          var panel = this.nextElementSibling;
          if (panel.style.display === "block") {
              panel.style.display = "none";
          } else {
              panel.style.display = "block";
          }
          if (panel.style.maxHeight) {
              panel.style.maxHeight = null;
          } else {
              panel.style.maxHeight = panel.scrollHeight + "px";
          }
      });

  } 
</script>

<!-- barra de busqueda por sala -->
<script>
    let btn_buscar = document.getElementById("boton_buscar");
    let sala = document.getElementById("input_buscar_sala");
    btn_buscar.addEventListener("click", buscar_sala);

    function buscar_sala() {
        // Verificamos que haya buscado
        var c = sala.value;
        if (c == '' || c == undefined || c == null) {
            Swal.fire({
                text: 'Ingrese una sala',
                icon: 'warning'
            })
            return 0;
        }
        window.location.href = 'vistaSalas_administrador.html?&sala=SALA%20' + sala.value;
    }
</script>


    <!-- validar localstorage -->
<script>
  var name = localStorage.getItem('nombre');
  var x = document.getElementById("saludo_usuario");
  if (localStorage.getItem('nombre') === null) {

      var loader = document.getElementById("error404");
      
      loader.style.display = "block"; // Muestra la pantalla de carga

      var infinityNav = document.getElementById("infinityNav");
      infinityNav.style.display = "none";
      var infinityNav = document.getElementById("menu");
      infinityNav.style.display = "none";
      var infinityNav = document.getElementById("mydatatable-container");
      infinityNav.style.display = "none";
      var infinityNav = document.getElementById("bloques");
      infinityNav.style.display = "none";
      var infinityNav = document.getElementById("footer");
      infinityNav.style.display = "none";

  }

  else {
      name = name.toUpperCase()
      x.innerHTML += "BIENVENIDO@ ADMIN";
  }
</script>

</body>

</html>
